---
title: "Taxonomy assignment with pimba_run"
layout: archive
permalink: /handsOn_run/
---  

The output generated by PIMBA_prepare is a fasta file that PIMBA_run will use.

You must configure the inputs for the "run" mode according to the parameters below.

| Parameter | Description |
| ----------- | ----------- |
| outputrun            | Name of the output folder to be generated.                                                        |
| strategy             | Analysis strategy to be used. Can be "otu" or "asv". If "otu", PIMBA uses vsearch. If "asv", swarm is used. |
| otu_similarity       | Percentage of similarity used in OTU clustering. The default is 0.97.                            |
| assign_similarity    | Percentage of similarity used in taxonomy assignment. The default is 0.9.                       |
| mincoverage          | Minimum alignment coverage. The default is 0.9.                                              |
| otu_length           | Minimum length for trimming reads. If the value is 0, no reads will be trimmed.                 |
| hits_per_subject     | If 1, choose the best hit. If > 1, choose by majority. The default is 1.                        |
| marker_gene          | Marker gene and database for the analysis. Can be: 16S-SILVA, 16S-GREENGENES, 16S-RDP, 16S-NCBI, ITS-FUNGI-NCBI, ITS-FUNGI-UNITE, ITS-PLANTS-NCBI, COI-BOLD, or COI-NCBI. |
| e_value              | Expected value (e-value) used by BLAST. The default is 0.001.                                  |
| lulu                 | If set to 'yes', PIMBA will discard erroneous OTUs or ASVs using LULU. The default is 'no' (not using LULU). |
| ITS                  | Set to 'yes' if the reads are ITS.                                                               |
| remote | Define whether BLAST will be done in remote mode (without downloading the database) or local mode. |


#### Database paths
Depending on the database used, provide the full path to the files related to that database. Snakemake will only use the path specified in the "marker_gene" option from the previous item, so only the specified marker gene needs to be configured.

If you have chosen the COI dataset, just set the `marker_gene` variable in the config file to `COI-BOLD` and set the `COI-BOLD-DB` variable to `/home/program2/db/PIMBA_smk/3/COI_BOLD/`.
If you have chosen the ITS dataset, just set the `marker_gene` variable in the config file to `/home/program2/db/PIMBA_smk/3/ITS_plants/`.


Here is an example of a command:

```console
./pimba_run.sh -i AllSamples.fasta -o AllSamplesCOI_98clust90assign -w otu -s 0.98 -a 0.9 -c 0.9 -l 200 -h 1 -g /path/to/your/database/ -t 24 -e 0.1 -d databases.txt
```

If you are analyzing an ITS dataset, use the command bellow, just adding the `-m its` parameter:
```console
./pimba_run.sh -i AllSamples.fasta -o AllSamplesCOI_98clust90assign -w otu -s 0.98 -a 0.9 -c 0.9 -l 200 -h 1 -g /path/to/your/database/ -t 24 -e 0.1 -d databases.txt -m its
```

 
  
